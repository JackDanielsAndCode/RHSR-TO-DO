(function(e){riot.parsers={html:{},css:{},js:{coffee:function(e){return CoffeeScript.compile(e,{bare:true})},es6:function(e){return babel.transform(e,{blacklist:["useStrict"]}).code},none:function(e){return e}}};riot.parsers.js.coffeescript=riot.parsers.js.coffee;var r=("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,"+"defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,"+"indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,"+"pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,"+"typemustmatch,visible").split(","),t="area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr".split(","),n=["style","src","d"],i=/^<([\w\-]+)>(.*)<\/\1>/gim,c=/=({[^}]+})([\s\/\>])/g,s=/([\w\-]+)=(["'])([^\2]+?)\2/g,o=/{\s*([^}]+)\s*}/g,a=/^<([\w\-]+)\s?([^>]*)>([^\x00]*[\w\/}"']>$)?([^\x00]*?)^<\/\1>/gim,l=/<script(\s+type=['"]?([^>'"]+)['"]?)?>([^\x00]*?)<\/script>/gm,f=/<style(\s+type=['"]?([^>'"]+)['"]?|\s+scoped)?>([^\x00]*?)<\/style>/gm,u=/(^|\}|\{)\s*([^\{\}]+)\s*(?=\{)/g,p=/\/\*[^\x00]*?\*\//gm,m=/<!--.*?-->/g,d=/<([\w\-]+)([^>]*)\/\s*>/g,g=/^\s*\/\/.*$/gm,v=/\/\*[^\x00]*?\*\//gm,h=/(<input\s[^>]*?)type=['"]number['"]/gm;function b(e,r,t,n,i){return"riot.tag('"+e+"', '"+r+"'"+(t?", '"+t+"'":"")+(n?", '"+n.replace(/'/g,"\\'")+"'":"")+", function(opts) {"+i+"\n});"}function x(e,i,a){var l=riot.util.brackets;e=e.replace(l(c),'="$1"$2');e=i.whitespace?e.replace(/\n/g,"\\n"):e.replace(/\s+/g," ");e=e.trim().replace(m,"");e=e.replace(h,"$1riot-type="+l(0)+'"number"'+l(1));e=e.replace(s,function(e,t,i,c){if(c.indexOf(l(0))>=0){t=t.toLowerCase();if(n.indexOf(t)>=0)t="riot-"+t;else if(r.indexOf(t)>=0)t="__"+t}return t+'="'+c+'"'});if(i.expr){e=e.replace(l(o),function(e,r){var t=k(r,i,a).trim().replace(/\r?\n|\r/g,"").trim();if(t.slice(-1)==";")t=t.slice(0,-1);return l(0)+t+l(1)})}e=e.replace(d,function(e,r,n){var i="<"+r+(n?" "+n.trim():"")+">";if(t.indexOf(r.toLowerCase())==-1)i+="</"+r+">";return i});e=e.replace(/'/g,"\\'");e=e.replace(l(/\\{|\\}/g),"\\$&");if(i.compact)e=e.replace(/> </g,"><");return e}function w(e){e=e.replace(g,"").replace(v,"");var r=e.split("\n"),t="";r.forEach(function(e,n){var i=e.trim();if(i[0]!="}"&&i.indexOf("(")>0&&i.indexOf("function")==-1){var c=/[{}]/.exec(i.slice(-1)),s=c&&/(\s+)([\w]+)\s*\(([\w,\s]*)\)\s*\{/.exec(e);if(s&&!/^(if|while|switch|for|catch)$/.test(s[2])){r[n]=s[1]+"this."+s[2]+" = function("+s[3]+") {";if(c[0]=="}"){r[n]+=" "+i.slice(s[0].length-1,-1)+"}.bind(this)"}else{t=s[1]}}}if(e.slice(0,t.length+1)==t+"}"){r[n]=t+"}.bind(this);";t=""}});return r.join("\n")}function y(e,r,t){return r.replace(p,"").replace(u,function(r,t,n){return t+" "+n.split(/\s*,\s*/g).map(function(r){var t=r.trim().replace(/:scope\s*/,"");return t[0]=="@"||t=="from"||t=="to"||/%$/.test(t)?t:e+" "+t+', [riot-tag="'+e+'"] '+t}).join(",")}).trim()}function k(e,r,t){var n=r.parser||(t?riot.parsers.js[t]:w);if(!n)throw new Error('Parser not found "'+t+'"');return n(e,r)}function $(e,r){var t=riot.parsers.html[e];if(!t)throw new Error('Template parser not found "'+e+'"');return t(r)}function E(e,r,t){if(t=="scoped-css")e=y(r,e);else if(riot.parsers.css[t])e=riot.parsers.css[t](r,e);return e.replace(/\s+/g," ").replace(/\\/g,"\\\\").replace(/'/g,"\\'").trim()}function j(e,r){r=r||{};if(r.brackets)riot.settings.brackets=r.brackets;if(r.template)e=$(r.template,e);e=e.replace(i,function(e,t,n){return b(t,x(n,r),"","","")});return e.replace(a,function(e,t,n,i,c){i=i||"";var s=r.type;if(!c.trim()){i=i.replace(l,function(e,r,t,n){if(t)s=t.replace("text/","");c=n;return""})}var o="css",a="";i=i.replace(f,function(e,r,t,n){if(r&&r.trim()=="scoped")o="scoped-css";else if(t)o=t.replace("text/","");a=n;return""});return b(t,x(i,r,s),E(a,t,o),n,k(c,r,s))})}var O=e.document,C,T;function L(e,r){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4&&t.status==200)r(t.responseText)};t.open("GET",e,true);t.send("")}function S(e){var r=/[ \t]+/.exec(e);if(r)e=e.replace(new RegExp("^"+r[0],"gm"),"");return e}function q(e){var r=O.createElement("script"),t=O.documentElement;r.text=j(e);t.appendChild(r);t.removeChild(r)}function A(e){var r=O.querySelectorAll('script[type="riot/tag"]'),t=r.length;function n(){C.trigger("ready");T=true;e&&e()}if(!t){n()}else{[].map.call(r,function(e){var r=e.getAttribute("src");function i(e){q(e);t--;if(!t){n()}}return r?L(r,i):i(S(e.innerHTML))})}}riot.compile=function(e,r){if(typeof e=="string"){if(e.trim()[0]=="<"){var t=S(j(e));if(!r)q(t);return t}else{return L(e,function(e){var t=S(j(e));q(t);r&&r(t,e)})}}if(typeof e!="function")e=undefined;if(T)return e&&e();if(C){e&&C.on("ready",e)}else{C=riot.observable();A(e)}};var H=riot.mount;riot.mount=function(e,r,t){var n;riot.compile(function(){n=H(e,r,t)});return n};riot.mountTo=riot.mount})(this);